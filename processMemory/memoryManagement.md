
# 메모리 관리

## 메모리 관리란

소프트웨어 응용 프로그램이 컴퓨터 메모리를 엑세스하는 방식을 제어하고 조정하는 프로세스



소프트웨어가 실행될 때는 RAM에 올라가게 된다.

- 바이트 코드 로드

- 데이터 값과 구조를 저장

- 런타임 시스템 로드

이때 바이트코드를 로드하는 데 사용되는 공간 외에 스택과 힙이라는 공간을 사용


## 구조

### 텍스트 영역

- 실행할 코드가 저장되는 영역

- CPU가 텍스트 영역에 저장된 명령어를 하나씩 가져가 처리한다.


### 데이터 영역

- 전역변수와 정적 변수가 저장되는 영역이다.

- 프로그램이 시작되면 할당되고 종료되면 사라진다.


### 스택

- 후입선출 자료구조

### [스택이란?](./dataStructure/stack.md)

- 스택은 정적 메모리 할당에 사용된다

- 후임 선출이기 때문에 조회를 하지 않고 맨 위 블록에서 데이터를 조정하면 되기 때문에 매우 빠르다

- 그러나 크기가 유한하고 정적이어야 한다

- 함수가 선언될 때마다 스택으로 푸시되고 종료되면 팝 된다

- 스택에 저장되는 함수의 호출 정보를 스택 프레임이라고 한다.


### 힙

- 사용자가 관리할 수 있고 관리해야 하는 영역

- 사용자에 의해 동적으로 공간이 할당되고 해제된다.

- 메모리의 낮은 주소에서 높은 주소의 방향으로 할당된다.


### 중요한 이유

- 메모리(RAM)이 무한하지 않기 때문이다.

- 메모리를 계속해서 사용하기만 한다면 자체적으로 충돌이 일어나고 메모리 부족이 일어난다.

- 우리가 주로 말하는 메모리는 힙을 이야기한다.


- 수동으로 관리

- c, c++은 malloc 메모리 관리를 위한, realloc, calloc 등 메소드를 지원하고 포인터를 효율적으로 사용해서 메모리 관리를 직접 할 수 있다.


- 자동으로 관리

JVM, JavaScript, c#, Golang 등의 언어들은 GC(Garbage Collector)를 지원한다.

GC는 특정 간격으로 사용하지 않는 메모리들을 정리해 준다.


## JVM은 텍스트 영역이 없다

JVM 언어들은 os 위에서 실행되며 운영체제가 JVM을 실행하고 JVM이 언어로 된 프로그램을 실행하는 구조이다.

그렇기 때문에 프로그램이 운영체제 위가 아니라 운영체제 위에 있는 JVM 위에서 돌아간다.

그래서 텍스트 영역에 코드가 저장되는 것이 아니라 JVM이 해석한 바이트 코드는 코드 캐시에 올려진다.


﻿